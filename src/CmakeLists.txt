
INCLUDE(QtLinkMacro)
INCLUDE(RegPackageMacro)

SET(BUILD_BIN_TYPE_DIR ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/${CMAKE_CONFIGURATION_TYPES})
SET(BUILD_INCLUDE_DIR ${BUILD_DIR}/include)
SET(BUILD_INSTALL_DIR ${BUILD_DIR}/install)

MESSAGE(STATUS "BUILD_DIR: " ${BUILD_DIR})
MESSAGE(STATUS "BUILD_INCLUDE_DIR: " ${BUILD_INCLUDE_DIR})
MESSAGE(STATUS "BUILD_INSTALL_DIR: " ${BUILD_INSTALL_DIR})

FIND_PACKAGE(Qt5 COMPONENTS Core Widgets Gui REQUIRED)
ADD_SUBDIRECTORY(Core)
ADD_SUBDIRECTORY(Configuration)

# JUI SETUP ###################################################

ADD_LIBRARY(Jui SHARED
	${Core_hdr}
	${Core_src}
	${Core_res}
)

ADD_CUSTOM_COMMAND(TARGET Jui
	POST_BUILD
	COMMAND ${CMAKE_COMMAND} -E make_directory ${BUILD_INCLUDE_DIR}
    COMMAND ${CMAKE_COMMAND} -E copy_if_different ${Core_hdr} ${BUILD_INCLUDE_DIR}
)

TARGET_INCLUDE_DIRECTORIES(Jui PUBLIC ${BUILD_INCLUDE_DIR}/)

QtLink(Jui Core Widgets Gui)

INSTALL(TARGETS Jui 
	RUNTIME DESTINATION install
	#COMPONENT applications
)

RegPackage(Jui)

# CONFIG SETUP ###################################################

ADD_EXECUTABLE(Config 
	${Config_hdr}
	${Config_src}
)
TARGET_INCLUDE_DIRECTORIES(Config PUBLIC ${CMAKE_SOURCE_DIR}/build/include)
TARGET_INCLUDE_DIRECTORIES(Config PUBLIC ${CMAKE_SOURCE_DIR}/src/Core)
TARGET_LINK_LIBRARIES(Config PUBLIC Jui)

QtLink(Config Core Widgets)

INSTALL(TARGETS Config 
	RUNTIME DESTINATION install
	#COMPONENT applications
)

#####################################################
