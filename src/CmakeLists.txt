
ADD_SUBDIRECTORY(Core)
ADD_SUBDIRECTORY(Configuration)

FIND_PACKAGE(Qt5 COMPONENTS Core Widgets Gui REQUIRED)

ADD_LIBRARY(Jui SHARED
	${Core_hdr}
	${Core_src}
	${Core_res}
)
QT_ADDMODULE(Jui Core)
QT_ADDMODULE(Jui Widgets)
QT_ADDMODULE(Jui Gui)
#TARGET_LINK_LIBRARIES(Jui PUBLIC ${QT_LIBRARIES})


ADD_EXECUTABLE(Config 
	${Config_hdr}
	${Config_src}
)
TARGET_INCLUDE_DIRECTORIES(Config PUBLIC ${CMAKE_SOURCE_DIR}/build/include)
TARGET_INCLUDE_DIRECTORIES(Config PUBLIC ${CMAKE_SOURCE_DIR}/src/Core)
TARGET_LINK_LIBRARIES(Config PUBLIC Jui)
QT_ADDMODULE(Config Widgets)
QT_ADDMODULE(Config Core)
#QT_ADDMODULE(Config Gui)


INSTALL(
	TARGETS Jui Config
	EXPORT JuiTargets
    RUNTIME DESTINATION install
	CONFIGURATIONS Release
)

# PACKAGE SETUP ###################################################

INCLUDE(CMakePackageConfigHelpers)

CONFIGURE_PACKAGE_CONFIG_FILE(
	${CMAKE_SOURCE_DIR}/JuiConfig.cmake.in
	${CMAKE_BINARY_DIR}/JuiConfig.cmake
	INSTALL_DESTINATION lib/cmake
	#PATH_VARS ${CMAKE_BINARY_DIR@/bin}
)

EXPORT(EXPORT JuiTargets FILE ${CMAKE_BINARY_DIR}/JuiTargets.cmake)
EXPORT ( PACKAGE Jui ) 
